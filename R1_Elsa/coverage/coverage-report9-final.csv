Line,Code,Execution Count
1,/* global _ */,10
2,(function () {,15
3,'use strict';,16
4,,16
5,/* jshint ignore:start */,16
6,// Underscore's Template Module,26
7,// Courtesy of underscorejs.org,26
8,var _ = (function (_) {,27
9,_.defaults = function (object) {,17
10,if (!object) {,19
11,return object;,20
12,},20
13,"for (var argsIndex = 1, argsLength = arguments.length; argsIndex < argsLength; argsIndex++) {",19
14,var iterable = arguments[argsIndex];,30
15,if (iterable) {,31
16,for (var key in iterable) {,132
17,if (object[key] == null) {,121
18,object[key] = iterable[key];,120
19,},20
20,},127
21,},5177
22,},5177
23,return object;,5176
24,};,126
25,,126
26,"// By default, Underscore uses ERB-style template delimiters, change the",124
27,// following template settings to use alternative delimiters.,124
28,_.templateSettings = {,124
29,"evaluate    : /<%([\s\S]+?)%>/g,",124
30,"interpolate : /<%=([\s\S]+?)%>/g,",124
31,escape      : /<%-([\s\S]+?)%>/g,28
32,};,23
33,,23
34,"// When customizing `templateSettings`, if you don't want to define an",23
35,"// interpolation, evaluation or escaping regex, we need one that is",17
36,// guaranteed not to match.,17
37,var noMatch = /(.)^/;,17
38,,118
39,// Certain characters need to be escaped so that they can be put into a,118
40,// string literal.,117
41,var escapes = {,117
42,"""'"":      ""'"",",16
43,"'\\':     '\\',",17
44,"'\r':     'r',",17
45,"'\n':     'n',",17
46,"'\t':     't',",17
47,"'\u2028': 'u2028',",117
48,'\u2029': 'u2029',116
49,};,116
50,,116
51,var escaper = /\\|'|\r|\n|\t|\u2028|\u2029/g;,116
52,,115
53,"// JavaScript micro-templating, similar to John Resig's implementation.",114
54,"// Underscore templating handles arbitrary delimiters, preserves whitespace,",115
55,// and correctly escapes quotes within interpolated code.,115
56,"_.template = function(text, data, settings) {",115
57,var render;,115
58,"settings = _.defaults({}, settings, _.templateSettings);",216
59,,215
60,// Combine delimiters into one regular expression via alternation.,215
61,var matcher = new RegExp([,114
62,"(settings.escape || noMatch).source,",5164
63,"(settings.interpolate || noMatch).source,",5164
64,(settings.evaluate || noMatch).source,5265
65,"].join('|') + '|$', 'g');",5265
66,,5366
67,"// Compile the template source, escaping string literals appropriately.",5366
68,var index = 0;,5366
69,"var source = ""__p+='"";",5467
70,"text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {",5366
71,"source += text.slice(index, offset)",5366
72,".replace(escaper, function(match) { return '\\' + escapes[match]; });",5366
73,,5164
74,if (escape) {,5164
75,"source += ""'+\n((__t=("" + escape + ""))==null?'':_.escape(__t))+\n'"";",5164
76,},5164
77,if (interpolate) {,5164
78,"source += ""'+\n((__t=("" + interpolate + ""))==null?'':__t)+\n'"";",5164
79,},114
80,if (evaluate) {,114
81,"source += ""';\n"" + evaluate + ""\n__p+='"";",114
82,},113
83,index = offset + match.length;,113
84,return match;,113
85,});,113
86,"source += ""';\n"";",113
87,,113
88,"// If a variable is not specified, place data values in local scope.",113
89,if (!settings.variable) source = 'with(obj||{}){\n' + source + '}\n';,214
90,,315
91,"source = ""var __t,__p='',__j=Array.prototype.join,"" +",214
92,"""print=function(){__p+=__j.call(arguments,'');};\n"" +",416
93,"source + ""return __p;\n"";",416
94,,315
95,try {,415
96,"render = new Function(settings.variable || 'obj', '_', source);",314
97,} catch (e) {,920
98,e.source = source;,920
99,throw e;,920
100,},1021
101,,1222
102,"if (data) return render(data, _);",1222
103,var template = function(data) {,1222
104,"return render.call(this, data, _);",6272
105,};,6172
106,,6173
107,// Provide the compiled function source as a convenience for precompilation.,6072
108,template.source = 'function(' + (settings.variable || 'obj') + '){\n' + source + '}';,6072
109,,6072
110,return template;,5972
111,};,5972
112,,921
113,return _;,1021
114,})({});,819
115,,717
116,if (location.hostname === 'todomvc.com') {,717
117,"(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){",717
118,"(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),",617
119,"m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)",617
120,"})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');",616
121,"ga('create', 'UA-31081062-1', 'auto');",714
122,"ga('send', 'pageview');",714
123,},714
124,/* jshint ignore:end */,614
125,,614
126,function redirect() {,615
127,if (location.hostname === 'tastejs.github.io') {,615
128,"location.href = location.href.replace('tastejs.github.io/todomvc', 'todomvc.com');",615
129,},615
130,},615
131,,614
132,function findRoot() {,615
133,var base = location.href.indexOf('examples/');,615
134,"return location.href.substr(0, base);",615
135,},615
136,,614
137,"function getFile(file, callback) {",9
138,if (!location.host) {,9
139,return console.info('Miss the info bar? Run TodoMVC from a server to avoid a cross-origin error.');,9
140,},9
141,,9
142,var xhr = new XMLHttpRequest();,9
143,,10
144,"xhr.open('GET', findRoot() + file, true);",10
145,xhr.send();,10
146,,10
147,xhr.onload = function () {,10
148,if (xhr.status === 200 && callback) {,9
149,callback(xhr.responseText);,9
150,},9
151,};,9
152,},8
153,,7
154,"function Learn(learnJSON, config) {",7
155,if (!(this instanceof Learn)) {,7
156,"return new Learn(learnJSON, config);",7
157,},7
158,,7
159,"var template, framework;",7
160,,7
161,if (typeof learnJSON !== 'object') {,7
162,try {,6
163,learnJSON = JSON.parse(learnJSON);,7
164,} catch (e) {,7
165,return;,7
166,},7
167,},7
168,,7
169,if (config) {,7
170,template = config.template;,7
171,framework = config.framework;,7
172,},7
173,,7
174,if (!template && learnJSON.templates) {,6
175,template = learnJSON.templates.todomvc;,14
176,},14
177,,15
178,if (!framework && document.querySelector('[data-framework]')) {,115
179,framework = document.querySelector('[data-framework]').dataset.framework;,115
180,},115
181,,23
182,this.template = template;,22
183,,22
184,if (learnJSON.backend) {,22
185,this.frameworkJSON = learnJSON.backend;,29
186,this.frameworkJSON.issueLabel = framework;,28
187,this.append({,28
188,backend: true,28
189,});,28
190,} else if (learnJSON[framework]) {,34
191,this.frameworkJSON = learnJSON[framework];,33
192,this.frameworkJSON.issueLabel = framework;,33
193,this.append();,33
194,},38
195,,37
196,this.fetchIssueCount();,37
197,},37
198,,41
199,Learn.prototype.append = function (opts) {,40
200,var aside = document.createElement('aside');,40
201,"aside.innerHTML = _.template(this.template, this.frameworkJSON);",40
202,aside.className = 'learn';,40
203,,40
204,if (opts && opts.backend) {,40
205,// Remove demo link,43
206,var sourceLinks = aside.querySelector('.source-links');,42
207,var heading = sourceLinks.firstElementChild;,42
208,var sourceLink = sourceLinks.lastElementChild;,42
209,// Correct link path,42
210,var href = sourceLink.getAttribute('href');,14
211,"sourceLink.setAttribute('href', href.substr(href.lastIndexOf('http')));",6
212,sourceLinks.innerHTML = heading.outerHTML + sourceLink.outerHTML;,6
213,} else {,6
214,// Localize demo links,107
215,var demoLinks = aside.querySelectorAll('.demo-link');,107
216,"Array.prototype.forEach.call(demoLinks, function (demoLink) {",207
217,"if (demoLink.getAttribute('href').substr(0, 4) !== 'http') {",206
218,"demoLink.setAttribute('href', findRoot() + demoLink.getAttribute('href'));",206
219,},206
220,});,206
221,},206
222,,206
223,document.body.className = (document.body.className + ' learn-bar').trim();,206
224,"document.body.insertAdjacentHTML('afterBegin', aside.outerHTML);",206
225,};,206
226,,105
227,Learn.prototype.fetchIssueCount = function () {,4
228,var issueLink = document.getElementById('issue-count-link');,4
229,if (issueLink) {,4
230,"var url = issueLink.href.replace('https://github.com', 'https://api.github.com/repos');",4
231,var xhr = new XMLHttpRequest();,4
232,"xhr.open('GET', url, true);",105
233,xhr.onload = function (e) {,105
234,var parsedResponse = JSON.parse(e.target.responseText);,105
235,if (parsedResponse instanceof Array) {,105
236,var count = parsedResponse.length;,105
237,if (count !== 0) {,105
238,issueLink.innerHTML = 'This app has ' + count + ' open issues';,105
239,document.getElementById('issue-count').style.display = 'inline';,105
240,},105
241,},106
242,};,105
243,xhr.send();,105
244,},105
245,};,105
246,,4
247,redirect();,4
248,"getFile('learn.json', Learn);",4
249,})();,4
250,,4
251,"// Store a reference to the active route, allowing us to re-filter todo",3
252,// items as they are marked complete or incomplete.,3
253,this._activeRoute = currentPage;,3
254,,3
255,"if (currentPage === """")",3
256,"this._activeRoute = ""All"";",3
257,,3
258,this._filter();,3
259,,3
260,"this.view.render(""setFilter"", currentPage);",3
261,};,3
262,,2
263,// Export to window,2
264,window.app = window.app || {};,2
265,window.app.Controller = Controller;,2
266,})(window);,2
267,,1
